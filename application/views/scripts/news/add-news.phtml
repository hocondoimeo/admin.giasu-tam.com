<?php 
    $form = $this->form;
    $label = $form->getElement('Submit')->getLabel();
    $title = ($label == 'Delete')? 'Delete' : 'Update' ;
    if($label == 'Add') $title = 'Add';
?>

<div class="row-fluid">
    <div class="span12">
          <div class="pull-right">
              <a href="<?php echo $this->url(array('controller' => $this->text(strtolower('News')), 'action'=>$this->showAllUrl), null, true) ?>" >	
                  Back to list <?php echo $this->text('News'); ?>
              </a>
          </div>
          <h2>
              <?php echo $title.$this->text(' News'); ?>        
          </h2>
    </div>
</div>

<div class="row-fluid">	
<?php if(!empty($this->message) && isset($this->message[0])):?>
<?php $message = explode("/", $this->message[0]);?>
<div class="span12">
     <div class="alert alert-<?php echo $message[0];?>">
        <button class="close" data-dismiss="alert" type="button">X</button>
        <?php echo $message[1];?>
        <?php if(isset($message[2]))echo "<ul><li>".$message[2]."</li></ul>"?>
    </div>
</div>
<?php endif;?>
</div>

<div class="row-fluid">
    <div class="span12">
        <form class="" method="post" action="">
        <div class="form-horizontal">
	        <div class="row-fluid">
	            <div class="span8">
		            <fieldset class="form-vertical">
		                <?php //echo $this->renderFormElement($form->NewsId, 1);?>
		                <?php echo $this->renderFormElement($form->Title, 1);?>
		                <?php  echo $this->renderFormElement($form->Summary, 1);?>
		                <?php //echo $this->renderFormElement($form->UserId);?>
		                <?php echo $this->renderFormElement($form->Content, 1);?>
		                <?php echo $this->renderFormElement($form->Submit);?>
		                <?php echo $this->renderFormElement($form->Reset);?>
		                </fieldset>
	              </div>
		           <div class="span4">
			            <fieldset class="form-vertical">
			                <?php echo $this->renderFormElement($form->ImageUrl, 1);?>
			                <?php //echo $this->renderFormElement($form->CreatedDate);?>
			                <?php echo $this->renderFormElement($form->IsPrivate, 1);?>
			                <?php echo $this->renderFormElement($form->NewsCategoryId, 1);?>
			            </fieldset>
		            </div>
		         </div>
	         </div>
        </form>
    </div>
</div>
<!-- <script src="//tinymce.cachefly.net/4.1/tinymce.min.js"></script> -->
<script>
    $(document).ready(function(){

    	tinymce.init({
    	    selector: "textarea",
    	    theme: "modern",
    	    plugins: [
    	        "advlist autolink lists link image charmap print preview hr anchor pagebreak",
    	        "searchreplace wordcount visualblocks visualchars code fullscreen",
    	        "insertdatetime media nonbreaking save table contextmenu directionality",
    	        "emoticons template paste textcolor colorpicker textpattern"
    	    ],
    	    toolbar1: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
    	    toolbar2: "print preview media | forecolor backcolor emoticons",
    	    image_advtab: true,
    	    templates: [
    	        {title: 'Test template 1', content: 'Test 1'},
    	        {title: 'Test template 2', content: 'Test 2'}
    	    ]
    	});           
        
        /*tinyMCE.init({
            // General options
            //mode : "textareas",
            selector: "textarea",
            theme : "modern",
            width : "600",
            height : "200",
            // Theme options
            theme_advanced_buttons1 : "bold,removeformat",
            removeformat_selector : 'div,table,em,i,span,ins,ul,li',
            theme_advanced_resizing : true,
            forced_root_block : false,
            force_br_newlines : true,	
            force_p_newlines : false,
            plugins: [
                      "advlist autolink lists link image charmap print preview anchor",
                      "searchreplace visualblocks code fullscreen",
                      "insertdatetime media table contextmenu paste moxiemanager"
            ],
            toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
            onchange_callback: function(editor) {
                tinyMCE.triggerSave();
                $("#" + editor.id).valid();
            }
        });
        
        $(".form-horizontal").submit(
        function(){
            tinyMCE.triggerSave();
        }
    ).validate({
            ignore: "",
            errorElement: "span",
            errorClass: "help-inline",
            errorPlacement: function(error, element) {
                error.appendTo( element.parent() );                
            },
            highlight: function(element) {                
                $(element).parent().parent().addClass('error');
            },
            unhighlight: function(element) {                
                $(element).parent().parent().removeClass('error');
                
            },
            rules: {
                technology: {
                    required: true
                }
            },
            messages:{
                technology:"Please enter Technology"
            }
        }); */
    });
</script>